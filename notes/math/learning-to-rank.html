<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>Learning to Rank</title>
  <style>
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <link rel="stylesheet" href="/static/custom.css" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-AMS_CHTML-full" type="text/javascript"></script>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<header id="title-block-header">
<h1 class="title">Learning to Rank</h1>
</header>
<nav id="TOC" role="doc-toc">
<ul>
<li><a href="#缘起"><span class="toc-section-number">1</span> 缘起</a></li>
<li><a href="#几个思想"><span class="toc-section-number">2</span> 几个思想</a><ul>
<li><a href="#pointwise"><span class="toc-section-number">2.1</span> PointWise</a></li>
<li><a href="#pairwise"><span class="toc-section-number">2.2</span> PairWise</a></li>
<li><a href="#listwise"><span class="toc-section-number">2.3</span> ListWise</a><ul>
<li><a href="#kl距离"><span class="toc-section-number">2.3.1</span> KL距离</a></li>
</ul></li>
</ul></li>
<li><a href="#具体算法"><span class="toc-section-number">3</span> 具体算法</a><ul>
<li><a href="#ranknet"><span class="toc-section-number">3.1</span> RankNet</a></li>
</ul></li>
<li><a href="#参考"><span class="toc-section-number">4</span> 参考</a></li>
</ul>
</nav>
<h1 id="缘起"><span class="header-section-number">1</span> 缘起</h1>
<p>基本检索模型中，用来排序所考虑的因素并不多，由人工进行公式拟合是完全可行的。随着搜索引擎的发展，对于网页进行排序需要考虑的因素增多，比如PageRank值、查询和文档匹配的单词个数、网页url链接地址的长度等都对网页排名有影响。</p>
<p>其中标注的数据来源主要是依靠用户点击。</p>
<h1 id="几个思想"><span class="header-section-number">2</span> 几个思想</h1>
<p>PointWise和PairWise把排序问题转换成回归、分类或有序分类问题，ListWise把Query下整个搜索结果作为一个训练的实例。三种方法主要体现在损失函数的不同。</p>
<h2 id="pointwise"><span class="header-section-number">2.1</span> PointWise</h2>
<p>将文档根据是否相关构造成数据集，形如：</p>
<table>
<thead>
<tr class="header">
<th>docid</th>
<th>queryid</th>
<th>feature1</th>
<th>feature2</th>
<th>…</th>
<th>featureN</th>
<th>相关性</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>苹果 电脑</td>
<td>0.19</td>
<td>8</td>
<td>2</td>
<td>…</td>
<td>2</td>
<td>相关</td>
</tr>
</tbody>
</table>
<p>然后训练各个feature的权重。</p>
<h2 id="pairwise"><span class="header-section-number">2.2</span> PairWise</h2>
<p>PointWise没有考虑文档之间的顺序关系。在推荐领域，被推荐的事物分为两类，一类是被用户点击，另一类是未被点击，在排序时，如果将后者放在了前者的前面，这生成了一个错误的排序对，对应着一条训练数据X。而X的长度为主题的个数 。</p>
<p>但是仍然存在两个问题：</p>
<ul>
<li>排序对只考虑了两个文档的相对先后顺序，如果前列文档出现判断错误，代价明显高于排在后面的文档；</li>
<li>不同的查询，其相关排序对的数量差异较大，所以在样本中容易出现偏斜问题，造成排序对较少的查询错误率即使较高，也不能太大影响整体的错误率，导致继续调优困难。</li>
</ul>
<h2 id="listwise"><span class="header-section-number">2.3</span> ListWise</h2>
<p>ListWise 中，一个查询及其对应的所有搜索结果评分作为一个实例。根据这些训练实例得到最优评分函数(F)，对于一个新的用户查询，函数(F)对每一个文档进行打分，按照得分高低进行排序。</p>
<p>训练方式为：假设有3篇文档ABC，评分函数F会分别得出相关性分数F(A),F(B),F(C)，根据这3个得分可以计算6中不同的排列组合情况各自的概率值，不同的评分函数，6中搜索结果的排列组合的概率分布<span class="math inline">\(F&#39;\)</span>是不一样的。假设有一个理想的评分函数G，其概率分布为<span class="math inline">\(G&#39;\)</span>，那么训练的目标就是寻找和<span class="math inline">\(G&#39;\)</span>最相似的<span class="math inline">\(F&#39;\)</span>，通过KL距离可以衡量初两个概率分布差异的大小。</p>
<h3 id="kl距离"><span class="header-section-number">2.3.1</span> KL距离</h3>
<p>KL距离（Kullback-Leibler Divergence），也叫相对熵，用于衡量相同事件空间里的两个概率分布的差异情况。其物理意义是：在相同的事件空间中，概率分布P(X)对应的每个事件，若用概率分布Q(X)编码时，平均每个基本事件编码长度增加了多少比特。计算公式如下： <span class="math display">\[D(P||Q)=∑_{x{∈}X}{P(x)log}\]</span> 当概率分布相同时，相对熵为0。其中概率分布<span class="math inline">\(P(X)\)</span>的信息熵为： <span class="math display">\[H(P)=-∑_{x{∈}X}{P(x){log}P(x)}\]</span> 其表示概率分布P(X)编码时，平均每个基本事件至少需要多少比特。因此不存在其他比按照概率分布更好的编码方式了。</p>
<h1 id="具体算法"><span class="header-section-number">3</span> 具体算法</h1>
<h2 id="ranknet"><span class="header-section-number">3.1</span> RankNet</h2>
<h1 id="参考"><span class="header-section-number">4</span> 参考</h1>
<ul>
<li><a href="http://www.cnblogs.com/kemaswill/archive/2013/06/01/3109497.html">Learning to Rank 简介</a></li>
<li><a href="https://tech.meituan.com/deep_learning_doc.html">深度学习在文本领域的应用 – 美团算法团队</a></li>
<li><a href="https://baijiahao.baidu.com/s?id=1570247207721372">百度NLP | 神经网络语义匹配技术</a></li>
<li><a href="https://blog.csdn.net/eastmount/article/details/43080791">【学习排序】 Learning to Rank中Pointwise关于PRank算法源码实现</a>：其中清楚描述了样本集的形式</li>
<li><a href="https://blog.csdn.net/eastmount/article/details/42367515">机器学习排序之Learning to Rank简单介绍</a></li>
</ul>
</body>
</html>
